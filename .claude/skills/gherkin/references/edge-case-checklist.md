# 예외 케이스 체크리스트

## 목적
Phase B에서 사용자가 최소 5개 이상의 예외 케이스를 Gherkin 시나리오로 작성한다.

---

## Edge Case 워크시트 템플릿 (Phase B)

```gherkin
# Edge Cases for: [Feature명]
# 최소 5개 이상 작성 필요

Feature: [기능명]

  # ============================================
  # 1. 입력 검증 실패 (@validation)
  # ============================================

  @edge @validation
  Scenario: [필수값 누락]
    When [엔티티명] [행동] 요청을 보낸다
      | 필드1 | 필드2 |
      |       | 값2   |
    Then 상태 코드 400을 받는다
    And 에러 메시지는 "[필수값]은(는) 필수입니다"이다

  @edge @validation
  Scenario: [형식 오류]
    When [엔티티명] [행동] 요청을 보낸다
      | 이메일필드     | 필드2 |
      | invalid-email  | 값2   |
    Then 상태 코드 400을 받는다
    And 에러 메시지는 "올바른 이메일 형식이 아닙니다"이다

  @edge @validation
  Scenario: [길이 제한 초과]
    When [엔티티명] [행동] 요청을 보낸다
      | 필드1              | 필드2 |
      | 256자_이상_문자열   | 값2   |
    Then 상태 코드 400을 받는다

  # ============================================
  # 2. 비즈니스 규칙 위반 (@business)
  # ============================================

  @edge @business
  Scenario: [중복 데이터]
    Given 다음 [엔티티명]가 존재한다
      | id | 유니크필드    |
      | 1  | existing_val |
    When [엔티티명] 생성 요청을 보낸다
      | 유니크필드    | 필드2 |
      | existing_val | 값2   |
    Then 상태 코드 409을 받는다
    And 에러 메시지는 "이미 존재하는 [데이터]입니다"이다

  @edge @business
  Scenario: [상태 위반]
    Given 다음 [엔티티명]가 [상태] 상태이다
      | id | 상태     |
      | 1  | CANCELLED |
    When [엔티티명] [행동] 요청을 보낸다: 1
    Then 상태 코드 400을 받는다
    And 에러 메시지는 "[상태] 상태에서는 [행동]할 수 없습니다"이다

  # ============================================
  # 3. 권한/인증 실패 (@auth)
  # ============================================

  @edge @auth
  Scenario: [미인증 사용자 접근]
    When 인증 없이 [엔티티명] [행동] 요청을 보낸다
    Then 상태 코드 401을 받는다

  @edge @auth
  Scenario: [권한 없음]
    Given 일반 사용자로 로그인되어 있다
    When [관리자_엔티티] [행동] 요청을 보낸다
    Then 상태 코드 403을 받는다

  # ============================================
  # 4. 리소스 없음 (@notfound)
  # ============================================

  @edge @notfound
  Scenario: [존재하지 않는 리소스]
    When [엔티티명] 조회 요청을 보낸다: 999999
    Then 상태 코드 404을 받는다

  # ============================================
  # 5. 경계값 (@boundary)
  # ============================================

  @edge @boundary
  Scenario: [최소값 미만]
    When [엔티티명] [행동] 요청을 보낸다
      | 수량필드 |
      | 0        |
    Then 상태 코드 400을 받는다

  @edge @boundary
  Scenario: [최대값 초과]
    When [엔티티명] [행동] 요청을 보낸다
      | 수량필드   |
      | 1000000000 |
    Then 상태 코드 400을 받는다

  @edge @boundary
  Scenario: [빈 컬렉션]
    Given [엔티티명] 목록이 비어 있다
    When [엔티티명] 목록 조회 요청을 보낸다
    Then 상태 코드 200을 받는다
    And 응답의 "content" 필드는 빈 배열이다
```

---

## 작성 체크리스트

### 필수 커버리지
- [ ] **입력 검증** 2개 이상: 필수값 누락, 형식 오류, 길이 제한
- [ ] **비즈니스 규칙** 1개 이상: 중복, 상태 위반, 수량 제한
- [ ] **권한/인증** 1개 이상: 미인증, 권한 없음
- [ ] **경계값** 1개 이상: 최소/최대값, 빈 값

### 총 개수 확인
```
총 작성된 Edge Case: ___개 (최소 5개 필요)
```

---

## 카테고리별 시나리오 패턴

### 1. 입력 검증 (@validation)

| 케이스 | When Data Table | Then |
|--------|-----------------|------|
| 필수값 누락 | `| 필드 |` + 빈 값 | 400 + "필수입니다" |
| 이메일 형식 | `invalid-email` | 400 + "올바른 형식이 아닙니다" |
| 숫자 범위 | 음수, 초과값 | 400 + "범위를 벗어났습니다" |
| 길이 제한 | 초과 문자열 | 400 + "최대 N자까지 가능합니다" |

### 2. 비즈니스 규칙 (@business)

| 케이스 | Given | Then |
|--------|-------|------|
| 중복 데이터 | 기존 데이터 존재 | 409 + "이미 존재합니다" |
| 상태 위반 | 잘못된 상태 | 400 + "불가능한 상태입니다" |
| 수량 제한 | 재고/한도 초과 | 400 + "초과했습니다" |
| 순서 위반 | 선행 작업 미완료 | 400 + "먼저 처리해주세요" |

### 3. 권한/인증 (@auth)

| 케이스 | Given/When | Then |
|--------|------------|------|
| 미인증 | `인증 없이...요청` | 401 |
| 권한 없음 | `일반 사용자로 로그인` | 403 |
| 만료된 토큰 | `만료된 토큰으로` | 401 |

### 4. 경계값 (@boundary)

| 케이스 | 값 | Then |
|--------|-----|------|
| 최소값 미만 | 0, -1 | 400 |
| 최대값 초과 | Integer.MAX | 400 |
| 빈 컬렉션 | [] | 200 + 빈 배열 |
| 첫/마지막 페이지 | page=0, page=last | 200 |

---

## STOP Protocol (Phase B 완료)

```
---
📁 파일 생성 완료: .atdd/scenarios/draft-edge-cases.md
👆 파일을 열어 최소 5개의 예외 케이스를 작성해주세요.
작성 완료 후 "완료" 또는 "다음"이라고 입력해주세요.
Phase C (Generation)로 진행합니다.
```
