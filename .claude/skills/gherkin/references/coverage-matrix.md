# 커버리지 매트릭스

## 목적
Phase D에서 요구사항과 시나리오 간의 매핑을 검증하여 테스트 커버리지를 확인한다.

---

## Coverage Matrix 템플릿

```markdown
# 테스트 커버리지 매트릭스

## Feature: [기능명]

### 요구사항-시나리오 매핑

| 요구사항 ID | 요구사항 내용 | 시나리오명 | 커버 여부 |
|-------------|---------------|------------|-----------|
| M1 | [Must Have 요구사항] | [시나리오명] | ✅ / ❌ |
| M2 | [Must Have 요구사항] | [시나리오명] | ✅ / ❌ |
| S1 | [Should Have 요구사항] | [시나리오명] | ✅ / ❌ |
| C1 | [Could Have 요구사항] | [시나리오명] | ✅ / ❌ |

### 커버리지 요약

| 우선순위 | 총 개수 | 커버 수 | 커버리지 |
|----------|---------|---------|----------|
| Must Have | N | M | M/N * 100% |
| Should Have | N | M | M/N * 100% |
| Could Have | N | M | M/N * 100% |

### 합격 기준
- [ ] Must Have 커버리지 100%
- [ ] Should Have 커버리지 80% 이상
- [ ] Could Have 커버리지 50% 이상
```

---

## 커버리지 매트릭스 예시

```markdown
# 테스트 커버리지 매트릭스

## Feature: 회원가입

### 요구사항-시나리오 매핑

| ID | 요구사항 | 시나리오 | 커버 |
|----|----------|----------|------|
| M1 | 이메일/비밀번호로 회원가입 | 정상적인 회원가입 | ✅ |
| M2 | 이메일 중복 검사 | 중복 이메일로 회원가입 | ✅ |
| M3 | 비밀번호 암호화 | (구현 시나리오에서 검증) | ✅ |
| S1 | 이메일 인증 | 이메일 인증 요청 | ✅ |
| S2 | 비밀번호 규칙 검증 | 잘못된 비밀번호 형식 | ✅ |
| C1 | 소셜 로그인 연동 | - | ❌ |
| C2 | 이용약관 동의 | - | ❌ |

### 커버리지 요약

| 우선순위 | 총 개수 | 커버 수 | 커버리지 | 상태 |
|----------|---------|---------|----------|------|
| Must Have | 3 | 3 | 100% | ✅ PASS |
| Should Have | 2 | 2 | 100% | ✅ PASS |
| Could Have | 2 | 0 | 0% | ⚠️ SKIP |

### 결과
- **상태**: ✅ PASS
- **비고**: Could Have는 이번 스프린트 제외
```

---

## 시나리오 유형별 매핑

### Happy Path → Must Have

```markdown
| Happy Path 시나리오 | 매핑되는 요구사항 |
|---------------------|-------------------|
| 정상적인 회원가입 | M1: 이메일/비밀번호로 회원가입 |
| 정상적인 로그인 | M4: 로그인 기능 |
| 정상적인 주문 | M5: 상품 주문 |
```

### Exception Path → 비즈니스 규칙

```markdown
| Exception 시나리오 | 매핑되는 요구사항 |
|--------------------|-------------------|
| 중복 이메일 | M2: 이메일 중복 검사 |
| 재고 부족 | M6: 재고 확인 |
| 권한 없음 | M7: 권한 검증 |
```

### Edge Case → 입력 검증

```markdown
| Edge Case 시나리오 | 매핑되는 요구사항 |
|--------------------|-------------------|
| 잘못된 이메일 형식 | S2: 입력값 검증 |
| 비밀번호 길이 부족 | S2: 입력값 검증 |
| 필수값 누락 | S2: 입력값 검증 |
```

---

## 미커버 요구사항 대응

### 1. 미커버 요구사항 발견 시

```markdown
## 미커버 요구사항 분석

### [요구사항 ID]: [내용]

**왜 커버되지 않았는가?**
- [ ] 시나리오 작성 누락
- [ ] 요구사항이 모호함
- [ ] 구현 불가능한 요구사항
- [ ] 의도적 제외 (우선순위)

**조치 계획**
- [시나리오 추가 / 요구사항 수정 / 요구사항 삭제]
```

### 2. 시나리오 추가 필요 시

```markdown
## 추가 필요 시나리오

1. [시나리오명]
   - Given: ...
   - When: ...
   - Then: ...

2. [시나리오명]
   - Given: ...
   - When: ...
   - Then: ...
```

---

## 커버리지 검증 체크리스트

- [ ] 모든 Must Have 요구사항이 시나리오와 매핑됨
- [ ] Should Have 요구사항 80% 이상 매핑됨
- [ ] 각 시나리오가 하나 이상의 요구사항을 커버함
- [ ] 불필요한 시나리오 없음 (요구사항 없는 시나리오)
- [ ] 매핑이 양방향으로 일관됨

---

## Phase D 완료 문구

```
---
✅ 커버리지 검증 완료

## 커버리지 요약
| 우선순위 | 커버리지 | 상태 |
|----------|----------|------|
| Must Have | 100% | ✅ |
| Should Have | 100% | ✅ |
| Could Have | 0% | ⚠️ (의도적 제외) |

**결과**: ✅ PASS

다음 단계: /tdd
```
